---
title: "Clase 4: Blogdown y Bookdown"
author: Lucio Cornejo
---
class: center, middle, inverse, title-slide

```{r setup, include=FALSE}
xaringanExtra::use_panelset()
xaringanExtra::use_tile_view()
xaringanExtra::use_fit_screen()
knitr::opts_chunk$set(echo = TRUE)
```

<h1 class = "celeste-ish" style="line-height: 90px; margin-top: -50px;">
    Clase 4:
    <p style="margin-bottom: -170px;"> &nbsp; </p>
    Blogdown y Bookdown
</h1>

<h3 class = "celeste-ish" style = "position: absolute; bottom: 80px;">
  Autor: Lucio Cornejo
</h3>

---

## Contenido extra para la sesión pasada

- **Xaringan** 
    - La opción `highlightStyle` del YAML de un archivo con `output`
    Xaringan permite algunos valores diferentes al valor
    `highlight` de un archivo con `output` html\_document,
    tal como el tipo de resaltado **dracula**.

    - Otras maneras de crear diapositivas en **R Markdown**:
        - reveal.js
            - <https://bookdown.org/yihui/rmarkdown/revealjs.html>
            - <https://e-gor.github.io/Reveal.js-TOC-Progress/demo/#/>

        - slidy_presentation
            - <https://bookdown.org/yihui/rmarkdown/slidy-presentation.html>
            - <https://pebiba-taller-rmd.netlify.app/index.html#(1)>
    
    - Problema respecto a la [tabla de contenidos](https://github.com/yihui/xaringan/issues/217).
    
    - Convertir las diapositivas a **PDF**:
        - Paquete **pagedown**
      
<p style="margin-bottom: -30px;"> &nbsp; </p>

- **Sitio web básico creado con R Markdown** 

    - Uso de la función `rmarkdown::render_site()`.
    
    - Uso del archivo `_output.yml`.
    
    - ¿Cómo añadir íconos al sitio web?
        - [Cómo obtener el script necesario.](https://www.youtube.com/watch?v=BATVa4vGZto&ab_channel=EasyTutorials)
        - [Algunas opciones de iconos.](https://www.w3schools.com/icons/icons_reference.asp)

???

Mostrar cómo incluir el script para íconos y el ícono para la 
página principal del sitio, en la carpeta del sitio web,
vía el archivo **_site.yml** 

---

## Distill

### Sitios web creados con Distill

<https://www.jvcasillas.com/>

<https://pkgs.rstudio.com/distill/articles/examples.html>

<p style="margin-bottom: -30px;"> &nbsp; </p>


### ¿Por qué usar Distill para crear un sitio web?

Es un formato más estable que **Blogdown**, ya que no
requiere de **Hugo**, así que se evita problemas de compatibilidad
(presentes o futuros) entre **Hugo** y **Blogdown**.

<p style="margin-bottom: -50px;"> &nbsp; </p>

> _La idea fue crear una platforma para ayudar a científicos a aprovechar_
> _los beneficios de la comunicación moderna vía HTML, la cual diseñadores_
> _digitales y periodistas han estado usando para crear artículos_
> _interactivos y atractivos ubicados donde están los lectores:_<br>
> ***en línea (online)***.<br>
> --- https://www.rstudio.com/blog/distill/

???

Comentar sobre el problema actual de compatibilidad de mi
[página](https://lucio-cornejo.github.io/) 
de Mathematical Music theory.

---

## Manos a la obra

- Creación del sitio web<br>

```{r, eval = FALSE}
distill::create_blog(dir = "nombre_carpeta", title = "nombre_sitio_web")
```

- Acceder al archivo `_site/index.html`, página principal del sitio web creado.

- Configuremos el archivo `_posts/welcome/welcome.Rmd`, lo renderizamos
y regresamos a la páginal principal del sitio web.

- Creación de un nuevo post<br>

```{r, eval = FALSE}
distill::create_post(title = "titulo_publicacion", draft = FALSE)
```

Podemos emplear `draft=TRUE` para que tal publicación no se muestre 
en el sitio web, ya que sería un _borrador_. En el **encabezado YAML**
de aquella publicación podemos cambiar `draft: FALSE` cuando 
el documeto este listo para ser publicado.

???

`create_blog(...) vs create_website(...)` 

- "Blogs Distill" son "sitios web Distill" con extra funcionalidades.
- Para un "blog Distill" es posible que las publicaciones se añadan
automáticamente con su preview y link en la homepage; sin embargo,
eso se tendría que hacer manualmente para "sitios web Distill".
- Cuando se reconstruye un "sitio web Distill", las publicaciones se
renderizan de nuevo, pero eso no ocurre para los "blog Distill", evitando
así posible problemas de compatibilidad tras actualizar paquetes de **RR**.

---

<p style="margin-bottom: -30px;"> &nbsp; </p>

- Definir el **preview** de la publicación.

- Una **tabla de contenidos** diferente a la que hemos estado empleando.
    
    - `toc: true` 
    - `toc_float: false` 

- Propiedad `code_folding: true` &nbsp;y creación de links para secciones de código.

- Añadir `categories: ["alguna_categoria"]` &nbsp;a la publicación creada y ver el
cambio que produce en la página principal del sitio web.

- Personalizar el diseño del sitio web

    - [Alternativa más rápida](https://rstudio.github.io/distill/website.html#theming)
    (no me funciona)
    - Crear un archivo **CSS** donde modificamos el estilo del sitio,
    y lo incluimos adecuadamente vía el `_site.yml` del sitio web.
        - Esconder la categoría `articles` de la página principal del sitio web.

---
class: middle

- Añadir sección de comentarios y para compartir la publicación:
    - Insertar el siguiente código al archivo `_site.yml` y cambiar
    el valor de `base_url` por el link con el cual se accederá al blog
    creado con **Distill** tras haberlo subido online:
    
      ```yaml
      base_url: https://mathematical-music-theory-blog.netlify.app/
      collections:
        posts:
          disqus:
            hidden: true 
          share: [twitter, linkedin, facebook, google-plus, pinterest]
      ``` 
- Esconder los anunciones en la sección de comentarios, modificando
apropiadamente el archivo `CSS` señalado en `_site.yml`.

- [Más propiedades](https://ymlthis.r-lib.org/reference/yml_distill_opts.html)
para incluir en el **encabezado YAML** de nuestros documentos creados con Distill.

---

## Publicación del blog creado con Distill

1. Ejecutamos `rmarkdown::render_site()` tras haber fijado como directorio
  aquel donde se encuentra el archivo **index.Rmd**.

1. En **GitHub**, creamos un repositorio con el mismo nombre que el nombre
  de la carpeta principal de nuestro blog Distill.

1. Ejecutamos en alguna terminal los siguientes comandos, tras cambiar 
  adecuadamente las secciones **ruta-de-la-carpeta-del-blog-Distill**,
  **nombre-de-usuario** y **nombre-del-repositorio**:

  <p style="margin-bottom: -70px;"> &nbsp; </p>
  
  .scrollable[
  ```text

  cd ruta-de-la-carpeta-del-blog-Distill
  git add .
  git commit -m "initial commit"
  git remote add origin https://github.com/nombre-de-usuario/nombre-del.repositorio.git
  git branch -M main
  git push -u origin main
  ```
  ]

---
class: middle

## Referencias para Distill

- <https://themockup.blog/posts/2020-08-01-building-a-blog-with-distill/>
- <https://rstudio.github.io/distill/blog.html>
- <https://rstudio.github.io/distill/metadata.html>
- <https://rstudio.github.io/distill/>

---
class: middle

## Blogdown

### Ejemplos de blog creados con R Markdown

- <https://malco.io/>
- <https://desiree.rbind.io/>
- <https://hugo-apero-docs.netlify.app/>

Lamentablemente, actualmente ya
[no funciona](https://github.com/rstudio/blogdown/issues/638)
el modelo mostrado, **hugo-acadecmic** (gcushen/hugo-academic),
con **Blogdown**.

Sin embargo, pueden emplear un modelo 
[parecido](https://themes.gohugo.io/themes/meghna-hugo/).

---

## Creamos un sitio web con el paquete Blogdown

Pasos para crear nuestro sitio web con **R Markdown** y el paquete **Blogdown**:<br>
1. Crear un nuevo repositorio en GitHub.
1. En RStudio, crear un nuevo proyecto vía un link del repositorio creado.
1. Ejecutar el siguiente código:
    ```r
    # Instalaciones
    install.packages("blogdown")
    #blogdown::install_hugo()
    blogdown::install.hugo(version = "0.79.1")

    # Creamos el sitio web
    library(blogdown)
    #new_site(theme = "themefisher/meghna-hugo")
    new_site(theme = "hugo-apero/hugo-apero", 
              format = "toml",
              sample = FALSE,
              empty_dirs = TRUE)
    ```

---

## Modificaciones básicas para personalizar el sitio web

- `config.toml` &nbsp;&nbsp;&nbsp;&nbsp; (comparar con el de mi portafolio)
    - `title` 
    - `author` 
    - `[params]` 
    - `[menu]`

- `content/_index.md` &nbsp;&nbsp;&nbsp;&nbsp;(homepage)
    - `description` 

- `content/blog/_index.md` 
    - `sidebar` 

- Personalizar el estilo visual del blog
    - `themes/hugo-apero/assets/theme` 
    - También podemos copiar el contenido
    de alguna plantilla como las de esta carpeta, creando una carpeta 
    `assets` y añadirles los archivos por mostrarles ahora.


---

## .Rmd vs .Rmarkdown

<https://bookdown.org/yihui/blogdown/output-format.html>

---

## Bookdown

- [Modelo básico para crear el libro](https://github.com/seankross/bookdown-start)

- Modificaciones básicas
    - `_output.yml` 
        - Cambiar el título "A Minimal Bookdown Book"
    - 


---

## Referencias para Bookdown

- <https://seankross.com/2016/11/17/How-to-Start-a-Bookdown-Book.html>
